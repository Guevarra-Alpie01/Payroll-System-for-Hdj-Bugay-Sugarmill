{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>{% block title %}Payroll System{% endblock title %}</title>
    
    {# Link to your main navigation design CSS #}
    <link rel="stylesheet" href="{% static 'css/navigation_design.css' %}">
    <link rel="stylesheet" href="{% static 'css/login_design.css' %}">
 
    {% block extra_head %}{% endblock extra_head %}
</head>
<body>

    <header>
        <nav class="main-nav"> 
            <div class="nav-brand">
                <a href="#"> 
                    <strong>Payroll System</strong>
                </a> 
            </div>
            
            {# ðŸ›‘ FIX: Changed condition to rely ONLY on account_id, which is set for all logged-in users #}
            {% if request.session.account_id %}
            <div class="nav-links-container">
                <ul class="nav-links nav-left">
                    {# Admin Navigation #}
                    {# ðŸ›‘ FIX: Changed condition to rely on role == 'admin' #}
                    {% if request.session.role == 'admin' %}
                        <li><a href="{% url 'navigation_app:user_home' %}" class="nav-link">Dashboard</a></li>
                        <li><a href="{% url 'navigation_app:admin_home' %}" class="nav-link">Admin Panel</a></li>
                        <li><a href="{% url 'navigation_app:AddUser' %}" class="nav-link">Manage Users</a></li>
                        <li><a href="#" class="nav-link">Reports</a></li>

                    {# User Navigation #}
                    {% elif request.session.role == 'user' %}
                        <li><a href="{% url 'navigation_app:user_home' %}" class="nav-link">Home</a></li>
                        <li><a href="#" class="nav-link">My Payroll</a></li>
                        <li><a href="#" class="nav-link">Leave Request</a></li>

                    {# HR Navigation #}
                    {% elif request.session.role == 'hr' %}
                        <li><a href="{% url 'humanresource:payroll_upload' %}" class="nav-link">Payroll Upload</a></li>
                        <li><a href="{% url 'humanresource:employee_list' %}" class="nav-link">Employee Management</a></li>

                    {# Timekeeper Navigation #}
                    {% elif request.session.role == 'timekeeper' %}
                        <li><a href="{% url 'navigation_app:user_home' %}" class="nav-link">Timekeeper Dashboard</a></li>
                        <li><a href="#" class="nav-link">Attendance</a></li>
                        <li><a href="#" class="nav-link">Time Records</a></li>
                        <li><a href="#" class="nav-link">Reports</a></li>
                    {% endif %}
                </ul>

                <ul class="nav-links nav-right">
                    {# User Name and Role Display #}
                    <li class="nav-item-user">
                        <a href="#" class="nav-link">
                            Welcome, {{ request.session.username }} 
                            {# ðŸ›‘ FIX: Changed condition to rely on role #}
                            {% if request.session.role == 'admin' %}
                                (Admin)
                            {% elif request.session.role %}
                                ({{ request.session.role|title }})
                            {% endif %}
                        </a>
                    </li>
                    
                    {# Logout Link #}
                    <li class="nav-item-auth">
                        <a href="{% url 'navigation_app:logout' %}" class="nav-link">Logout</a>
                    </li>
                </ul>
            </div>
            {% endif %}          
            <button class="nav-toggler" aria-label="Toggle navigation menu">
                <span class="toggler-icon"></span>
                <span class="toggler-icon"></span>
                <span class="toggler-icon"></span>
            </button>
        </nav>
    </header>
    
 
    <main class="container">
        {% block content %}
        {% endblock content %}
    </main>

    {% block extra_js %}{% endblock extra_js %}
</body>
</html>